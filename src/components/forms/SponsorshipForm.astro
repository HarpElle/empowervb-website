---
import { budgetRanges, getAllTiers } from '../../data/sponsorship-tiers.js';

const sponsorshipTiers = getAllTiers();
---
<div class="max-w-2xl mx-auto">
  <form 
    id="sponsorship-form" 
    class="card p-10 space-y-6"
    action="/api/sponsorship"
    method="POST"
  >
    <!-- Form Header -->
    <div class="text-center mb-8">
      <div class="w-16 h-16 bg-gradient-to-br from-empower-coral to-empower-coral/80 rounded-2xl flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
      </div>
      <h3 class="text-2xl md:text-3xl font-bold text-empower-navy mb-4">
        Partner With Us
      </h3>
      <p class="text-empower-mid-gray text-lg">
        Let's discuss how we can create a meaningful partnership that supports our athletes and your business goals.
      </p>
    </div>
    
    <!-- Honeypot spam protection -->
    <input type="checkbox" name="botcheck" style="display: none;">
    
    <!-- Company Information -->
    <div class="space-y-6">
      <h4 class="text-lg font-semibold text-empower-navy border-b border-empower-light-gray pb-2">
        Company Information
      </h4>
      
      <div class="grid md:grid-cols-2 gap-6">
        <div class="space-y-2">
          <label for="company_name" class="block text-sm font-semibold text-empower-navy">
            Company Name *
          </label>
          <input 
            type="text" 
            id="company_name"
            name="company_name" 
            placeholder="Your company name" 
            required
            class="form-input"
          />
        </div>
        
        <div class="space-y-2">
          <label for="contact_name" class="block text-sm font-semibold text-empower-navy">
            Contact Name *
          </label>
          <input 
            type="text" 
            id="contact_name"
            name="contact_name" 
            placeholder="Your full name" 
            required
            class="form-input"
          />
        </div>
      </div>
      
      <div class="grid md:grid-cols-2 gap-6">
        <div class="space-y-2">
          <label for="email" class="block text-sm font-semibold text-empower-navy">
            Email Address *
          </label>
          <input 
            type="email" 
            id="email"
            name="email" 
            placeholder="your.email@company.com" 
            required
            class="form-input"
          />
        </div>
        
        <div class="space-y-2">
          <label for="phone" class="block text-sm font-semibold text-empower-navy">
            Phone Number
          </label>
          <input 
            type="tel" 
            id="phone"
            name="phone" 
            placeholder="(555) 123-4567"
            class="form-input"
          />
        </div>
      </div>
    </div>

    <!-- Sponsorship Details -->
    <div class="space-y-6">
      <h4 class="text-lg font-semibold text-empower-navy border-b border-empower-light-gray pb-2">
        Sponsorship Interest
      </h4>
      
      <div class="space-y-2">
        <label for="interest_tier" class="block text-sm font-semibold text-empower-navy">
          Sponsorship Tier of Interest *
        </label>
        <div class="relative">
          <select 
            id="interest_tier"
            name="interest_tier" 
            required
            class="form-select"
          >
            <option value="">Select a sponsorship tier</option>
            {sponsorshipTiers.map(tier => (
              <option value={tier.key}>{tier.name} ({tier.price})</option>
            ))}
            <option value="custom">Custom Package</option>
          </select>
          <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
            <svg class="w-4 h-4 text-empower-mid-gray" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
      </div>
      
      <div id="budget_range_section" class="space-y-2" style="display: none;">
        <label for="budget_range" class="block text-sm font-semibold text-empower-navy">
          Budget Range *
        </label>
        <div class="relative">
          <select 
            id="budget_range"
            name="budget_range"
            class="form-select"
          >
            <option value="">Select your budget range</option>
            <option value="1500">$1,500 (Minimum Platinum)</option>
            <option value="2000">$2,000</option>
            <option value="2500">$2,500</option>
            <option value="3000">$3,000</option>
            <option value="4000">$4,000</option>
            <option value="5000">$5,000+</option>
            <option value="custom">Let's discuss</option>
          </select>
          <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
            <svg class="w-4 h-4 text-empower-mid-gray" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
        <p class="text-sm text-empower-mid-gray">
          Platinum level starts at $1,500. Help us understand your investment level for custom benefits.
        </p>
      </div>
    </div>
    
    <!-- Additional Information -->
    <div class="space-y-2">
      <label for="message" class="block text-sm font-semibold text-empower-navy">
        Tell Us About Your Goals
      </label>
      <textarea 
        id="message"
        name="message" 
        placeholder="What are you hoping to achieve through sponsorship? How do you envision partnering with our team?"
        rows="4"
        class="form-textarea"
      ></textarea>
    </div>
    
    <!-- Privacy Notice -->
    <div class="bg-empower-light-gray/50 rounded-xl p-4 text-sm text-empower-mid-gray">
      <div class="flex items-start gap-2">
        <svg class="w-4 h-4 text-empower-coral mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
        </svg>
        <p>
          We respect your privacy. Your information will only be used to contact you about sponsorship opportunities and will never be shared with third parties.
        </p>
      </div>
    </div>
    
    <!-- Submit Button -->
    <div class="pt-4">
      <button type="submit" class="btn-primary w-full text-lg py-4 group accent-heading">
        <span class="flex items-center justify-center gap-2">
          Submit Partnership Inquiry
          <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </span>
      </button>
    </div>
    
    <!-- Form Footer -->
    <div class="text-center pt-4 border-t border-empower-light-gray">
      <p class="text-sm text-empower-mid-gray">
        Questions? Contact us directly at 
        <a href="mailto:info@empowervb.com" class="text-empower-coral hover:underline font-semibold">
          info@empowervb.com
        </a>
      </p>
    </div>
  </form>
</div>

<script>
  // Form enhancement script
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('sponsorship-form');
    const submitBtn = form.querySelector('button[type="submit"]');
    const tierSelect = document.getElementById('interest_tier');
    const budgetSection = document.getElementById('budget_range_section');
    const budgetSelect = document.getElementById('budget_range');
    
    // Show/hide budget range based on tier selection
    if (tierSelect && budgetSection && budgetSelect) {
      tierSelect.addEventListener('change', function() {
        if (this.value === 'platinum' || this.value === 'custom') {
          budgetSection.style.display = 'block';
          budgetSelect.required = true;
        } else {
          budgetSection.style.display = 'none';
          budgetSelect.required = false;
          budgetSelect.value = '';
        }
      });
    }
    
    if (form && submitBtn) {
      // Add form validation feedback
      const inputs = form.querySelectorAll('input[required], select[required]');
      
      inputs.forEach(input => {
        input.addEventListener('blur', function() {
          if (this.value.trim() === '') {
            this.classList.add('border-red-400');
            this.classList.remove('border-empower-coral');
          } else {
            this.classList.remove('border-red-400');
            this.classList.add('border-empower-coral');
          }
        });
        
        input.addEventListener('input', function() {
          if (this.value.trim() !== '') {
            this.classList.remove('border-red-400');
            this.classList.add('border-empower-coral');
          }
        });
      });
      
      // Submit button loading state and analytics tracking
      form.addEventListener('submit', function() {
        // Track form submission
        if (typeof gtag !== 'undefined') {
          gtag('event', 'form_submit', {
            form_name: 'sponsorship_form',
            form_destination: 'thank_you_sponsorship'
          });
        }
        
        submitBtn.disabled = true;
        submitBtn.innerHTML = `
          <span class="flex items-center justify-center gap-2">
            <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Submitting...
          </span>
        `;
      });
    }
  });
</script> 