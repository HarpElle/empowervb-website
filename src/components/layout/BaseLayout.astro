---
import '../../styles/global.css';

// Accept props from pages with defaults
const { 
  title = 'Empower Volleyball Club', 
  description = 'Empowering Female Athletes Through Excellence', 
  canonicalURL = Astro.url,
  robots = 'index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1'
} = Astro.props;

const siteUrl = 'https://empowervb.com';

// Get current page for active navigation
const currentPath = Astro.url.pathname.replace(/\/$/, '') || '/';
---
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="/images/logo/empower-logo-og-image.png" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content="/images/logo/empower-logo-og-image.png" />
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content={robots} />
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href={canonicalURL} />
    <meta name="geo.region" content="US-WI">
    <meta name="geo.placename" content="Elm Grove, Wisconsin">
    <meta name="geo.position" content="43.0442;-88.0826">
    <meta name="ICBM" content="43.0442, -88.0826">
    
    <meta name="theme-color" content="#FF7F50" />
    <link rel="icon" type="image/svg+xml" href="/images/logo/favicon.svg" />
    <link rel="icon" type="image/png" href="/images/logo/favicon.png" />
    <link rel="icon" type="image/x-icon" href="/images/logo/favicon.ico" />
    <link rel="apple-touch-icon" href="/images/logo/apple-touch-icon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-97HNLRJNLF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-97HNLRJNLF');
    </script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": ["SportsOrganization", "LocalBusiness"],
      "name": "Empower Volleyball Club",
      "url": "https://empowervb.com",
      "logo": "https://empowervb.com/images/logo/empower-logo-horizontal-full-color-2x.png",
      "description": "Premier volleyball club empowering female athletes in Southeastern Wisconsin",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Elm Grove",
        "addressRegion": "Wisconsin",
        "addressCountry": "US"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-262-235-3232",
        "contactType": "customer service",
        "email": "info@empowervb.com"
      },
      "sameAs": [
        "https://empowervb.com"
      ],
      "openingHours": "Mo-Fr 09:00-18:00",
      "areaServed": "Southeastern Wisconsin"
    }
    </script>

    <link rel="preload" as="image" href="/images/logo/empower-logo-horizontal-full-color.svg" type="image/svg+xml" />
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&family=Quicksand:wght@300;400;500;600;700&display=swap" />
  </head>
  <body class="min-h-screen flex flex-col bg-empower-navy">
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-empower-coral text-white px-4 py-2 rounded-lg z-50">
      Skip to main content
    </a>
    
    <!-- Enhanced Responsive Navbar -->
    <nav id="navbar" class="w-full section-navy text-white px-4 py-3 shadow-lg fixed top-0 z-50 backdrop-blur-md transition-transform duration-300 ease-out">
      <div class="max-w-7xl mx-auto flex items-center justify-between">
        <!-- Logo Section with Navigation -->
        <a href="/" class="flex items-center gap-3 hover:opacity-90 transition-opacity duration-300 -mt-20 -mb-24 relative">
          <div class="relative">
            <img 
              src="/images/logo/empower-logo-horizontal-full-color.svg"
              alt="Empower Volleyball Club Logo"
              class="h-12 w-auto relative z-10"
              loading="lazy"
            />
            <!-- Precise background positioning -->
            <div class="absolute bg-white/95 backdrop-blur-sm shadow-lg" 
                 style="top: -36px; bottom: -16px; left: -16px; right: -16px; z-index: 0; border-radius: 1rem 1rem 1rem 1rem;"></div>
          </div>
        </a>
        
        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center gap-8">
          <a href="/" class={`nav-link ${currentPath === '/' ? 'active' : ''}`}>Home</a>
          <a href="/about" class={`nav-link ${currentPath === '/about' ? 'active' : ''}`}>About</a>
          <a href="/news" class={`nav-link ${currentPath === '/news' ? 'active' : ''}`}>News</a>
          <a href="/contact" class={`nav-link ${currentPath === '/contact' ? 'active' : ''}`}>Contact</a>
        </div>
        
        <!-- CTA Button (Desktop) - Only show if not on Interest page -->
        <div class="hidden md:block">
          <a
            href="/interest"
            class={`btn-primary text-sm px-6 py-2${currentPath === '/interest' ? ' invisible' : ''}`}
            tabindex={currentPath === '/interest' ? -1 : 0}
            aria-hidden={currentPath === '/interest' ? 'true' : 'false'}
          >
            Join Us
          </a>
        </div>
        
        <!-- Mobile Menu Button -->
        <div class="md:hidden">
          <button 
            id="menu-toggle" 
            aria-label="Open menu" 
            aria-expanded="false"
            aria-controls="mobile-menu"
            class="focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-empower-navy p-2 rounded-lg hover:bg-white/10 transition-colors"
          >
            <svg id="menu-icon" class="w-6 h-6 transition-transform duration-300" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <svg id="close-icon" class="w-6 h-6 hidden transition-transform duration-300" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </nav>
    
    <!-- Enhanced Mobile Menu -->
    <div id="mobile-menu" class="md:hidden hidden fixed top-[64px] left-0 right-0 z-40 bg-gradient-to-br from-empower-navy to-empower-navy/95 backdrop-blur-md border-t border-white/10" aria-hidden="true">
      <div class="px-4 py-6 space-y-4">
        <a href="/" class={`block py-3 px-4 rounded-lg transition-all duration-300 ${currentPath === '/' ? 'bg-empower-coral text-white' : 'text-white hover:bg-white/10 hover:text-empower-coral'}`}>
          <div class="flex items-center gap-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
            Home
          </div>
        </a>
        <a href="/about" class={`block py-3 px-4 rounded-lg transition-all duration-300 ${currentPath === '/about' ? 'bg-empower-coral text-white' : 'text-white hover:bg-white/10 hover:text-empower-coral'}`}>
          <div class="flex items-center gap-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            About
          </div>
        </a>
        <a href="/news" class={`block py-3 px-4 rounded-lg transition-all duration-300 ${currentPath === '/news' ? 'bg-empower-coral text-white' : 'text-white hover:bg-white/10 hover:text-empower-coral'}`}>
          <div class="flex items-center gap-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
            </svg>
            News
          </div>
        </a>
        <a href="/contact" class={`block py-3 px-4 rounded-lg transition-all duration-300 ${currentPath === '/contact' ? 'bg-empower-coral text-white' : 'text-white hover:bg-white/10 hover:text-empower-coral'}`}>
          <div class="flex items-center gap-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm0 0v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M16 2v2m0 16v2m-8-2v2m0-18V2" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M8 6h8M8 10h8M8 14h8" />
            </svg>
            Contact
          </div>
        </a>
        {currentPath !== '/interest' && (
          <div class="pt-4 border-t border-white/10">
            <a href="/interest" class="btn-primary w-full text-center block">Join Our Team</a>
          </div>
        )}
      </div>
    </div>
    
    <main id="main-content" class="flex-1 w-full pt-[72px]">
      <slot />
    </main>
    
    <!-- Enhanced Footer -->
    <footer class="section-navy text-white py-12 mt-16">
      <div class="max-w-7xl mx-auto px-4">
        <div class="grid md:grid-cols-3 gap-8 mb-8">
          <!-- Brand Section -->
          <div class="space-y-4">
            <a href="/" class="flex items-center gap-3 hover:opacity-80 transition-opacity duration-300 my-2
            ">
              <img 
                src="/images/logo/empower-logo-horizontal-white.svg" 
                alt="Empower Volleyball Club Logo" 
                class="h-10 w-auto"
                loading="lazy"
              />
            </a>
            <p class="text-sm text-empower-lilac/90 leading-relaxed">
              Empowering female athletes through excellence, teamwork, and character development in a supportive family environment.
            </p>
          </div>
          
          <!-- Quick Links -->
          <div class="space-y-4">
            <h4 class="font-semibold text-lg text-white">Quick Links</h4>
            <div class="space-y-2">
              <a href="/about" class="block text-sm text-empower-lilac/90 hover:text-empower-coral transition-colors">About Us</a>
              <a href="/interest" class="block text-sm text-empower-lilac/90 hover:text-empower-coral transition-colors">Join Our Team</a>
              <a href="/news" class="block text-sm text-empower-lilac/90 hover:text-empower-coral transition-colors">Latest News</a>
              <a href="/contact" class="block text-sm text-empower-lilac/90 hover:text-empower-coral transition-colors">Contact Us</a>
            </div>
          </div>
          
          <!-- Contact Info -->
          <div class="space-y-4">
            <h4 class="font-semibold text-lg text-white">Get In Touch</h4>
            <div class="space-y-3">
              <a href="mailto:info@empowervb.com" class="flex items-center gap-2 text-sm text-empower-lilac/90 hover:text-empower-coral transition-colors" onclick="if(typeof gtag !== 'undefined') gtag('event', 'email_click', {email_address: 'info@empowervb.com'});">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25H4.5a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15A2.25 2.25 0 002.25 6.75m19.5 0v.243a2.25 2.25 0 01-.876 1.775l-7.125 5.7a2.25 2.25 0 01-2.748 0l-7.125-5.7A2.25 2.25 0 012.25 6.993V6.75" />
                </svg>
                info@empowervb.com
              </a>
              <a href="tel:+1-262-235-3232" class="flex items-center gap-2 text-sm text-empower-lilac/90 hover:text-empower-coral transition-colors" onclick="if(typeof gtag !== 'undefined') gtag('event', 'phone_click', {phone_number: '(262) 235-3232'});">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
                </svg>
                (262) 235-3232
              </a>
              <div class="flex items-center gap-2 text-sm text-empower-lilac/90">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 2.25c4.556 0 8.25 3.694 8.25 8.25 0 6.364-8.25 11.25-8.25 11.25S3.75 16.864 3.75 10.5c0-4.556 3.694-8.25 8.25-8.25z" />
                  <circle cx="12" cy="10.5" r="2.25" />
                </svg>
                Elm Grove, Wisconsin
              </div>
            </div>
          </div>
        </div>
        
        <!-- Footer Bottom -->
        <div class="border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
          <div class="text-sm text-empower-lilac/80">
            &copy; {new Date().getFullYear()} Empower Volleyball Club, LLC. All rights reserved.
          </div>
          <div class="flex items-center gap-6">
            <a href="https://harpelle.com" target="_blank" rel="noopener noreferrer" class="text-xs text-empower-lilac/70 hover:text-empower-coral transition-colors">
              Site design by HarpElle
            </a>
            <div class="flex items-center gap-4">
              <a href="#" aria-label="Instagram" class="icon-hover">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <rect width="20" height="20" x="2" y="2" rx="5"/>
                  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                  <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/>
                </svg>
              </a>
              <a href="#" aria-label="Facebook" class="icon-hover">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
    <script>
      // Enhanced mobile menu toggle with animation
      const toggle = document.getElementById('menu-toggle');
      const menu = document.getElementById('mobile-menu');
      const menuIcon = document.getElementById('menu-icon');
      const closeIcon = document.getElementById('close-icon');
      let isMenuOpen = false;
      
      if (toggle && menu && menuIcon && closeIcon) {
        toggle.addEventListener('click', () => {
          const isOpen = !menu.classList.contains('hidden');
          
          if (isOpen) {
            // Close menu
            menu.classList.add('hidden');
            menuIcon.classList.remove('hidden');
            closeIcon.classList.add('hidden');
            isMenuOpen = false;
          } else {
            // Open menu
            menu.classList.remove('hidden');
            menuIcon.classList.add('hidden');
            closeIcon.classList.remove('hidden');
            isMenuOpen = true;
            // Ensure nav is visible when menu opens
            const nav = document.querySelector('nav');
            if (nav) {
              nav.style.transform = 'translateY(0)';
            }
          }
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
          if (!toggle.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.add('hidden');
            menuIcon.classList.remove('hidden');
            closeIcon.classList.add('hidden');
            isMenuOpen = false;
          }
        });
      }
      
      // Add smooth scroll effect to navigation
      let lastScrollTop = 0;
      const nav = document.getElementById('navbar');
      
      window.addEventListener('scroll', () => {
        // Don't hide nav when mobile menu is open
        if (isMenuOpen) {
          return;
        }
        
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        if (scrollTop > lastScrollTop && scrollTop > 80) {
          // Scrolling down - hide navbar smoothly
          nav.style.transform = 'translateY(-140%)';
        } else {
          // Scrolling up - show navbar smoothly
          nav.style.transform = 'translateY(0)';
        }
        
        lastScrollTop = scrollTop;
      });
    </script>
  </body>
</html> 